{% extends "base.html" %}
{% load static %}

{% block title %}List of Expenses - Traveller {% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/expense_list.css' %}">
{% endblock %}

{% block content %}
<div class="header">
  <div class="header-left">
    <h1>Travelpork</h1>
  </div>
  <div class="header-right">
    <span class="welcome-text">Welcome back, {{ user.email }}</span>
    <a href="{% url 'login' %}" class="btn btn-primary">Logout</a>
  </div>

</div>

<div class="content-container">
  <div class="page-nav">
    <a href="{% url 'users:traveller_dashboard' %}" class="back-link">‚Üê Back to Dashboard</a>
    <div class="page-info">
      <h2>List of Expenses</h2>
      <p>Manage and organize all your travel expenses.</p>
    </div>
    <div class="page-actions">
      <a href="{% url 'expenses:expense_create' %}" class="btn btn-primary">+ Add New Expense</a>
    </div>
  </div>
  {% if expenses %}
  <div class="table-container">
    <h3>Your Travel Expenses ({{ expenses.count }} total)</h3>
    
    <table class="expenses-table">
      <thead>
        <tr>
          <th>Date </th>
          <th>Amount </th>
          <th>Category </th>
          <th>Status </th>
          <th>View </th>
        </tr>
      </thead>
      <tbody>
  {% for expense in expenses %}
    <tr>
      <td>{{ expense.expense_date|date:"d/m/Y" }}</td>
      <td>${{ expense.amount|floatformat:2 }}</td>
      <td>
        <span class="category-tag category-{{ expense.category|lower }}">
          {{ expense.get_category_display }}
        </span>
      </td>
      <td>
        <span class="status-badge status-{{ expense.status|lower }}">
          {{ expense.get_status_display }}
        </span>
      </td>
      <td>
  <span class="action-badge action-{{ expense.action|lower }}">
    {{ expense.get_action_display }}
  </span>
  <a href="{% url 'expenses:expense_detail' expense.id %}" class="view-btn">üëÄ View</a>
</td>
    </tr>
  {% endfor %}
</tbody>
    </table>
  </div>
  {% else %}
  <div class="empty-state">
    <p>No expenses to display</p>
    <a href="{% url 'expenses:expense_create' %}" class="btn btn-primary">Add Your First Expense<a>
  </div>
  {% endif %}
</div>
{% endblock %}

